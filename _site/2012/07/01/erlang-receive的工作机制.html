<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="rangechow">
  <meta name="description" content="receive works as follows:">

  <title>erlang Receive的工作机制</title>
 
  <link rel="stylesheet" href="/css/zen.css">
  <link rel="canonical" href="http://www.rangechow.com/2012/07/01/erlang-receive%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6.html">
  <link rel="alternate" type="application/rss+xml" title="RangeChow" href="http://www.rangechow.com/feed.xml">

  <script src="/js/zen-js.min.js"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-71759796-1', 'auto');
  ga('send', 'pageview');

  </script>
</head>


  <body>
    <div id="container">
      <div class="mobile-nav-panel">
  <i class="icon-reorder icon-large"></i>
</div>

<nav class="nav" role="navigation">
  <ul>
    <li>
      <a href="/">Home</a>
    </li>
    <li>
      <a href="/archive.html">Archive</a>
    </li>
     
    <li>
      <a class="page-link" href="/about/">About Me</a>
    </li>
                       
    <li>
        <a href="/feed.xml">RSS</a>
    </li>
  </ul>
</nav>

<header id="header" role="banner">
  <h1 class="blog-title">
    <a href="/">RangeChow</a>
  </h1>
  <h2 class="blog-description">自律，坚持
</h2>
</header>
      <div id="main" class="autopagerize_page_element" role="main">
    <article class="post sample text">
        <div class="date">
            <p><a href="/2012/07/01/erlang-receive%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6.html">Jul 1, 2012</a></p>
        </div>

        <header class="entry-header">
            <h1 class="entry-title">
                <a href="/2012/07/01/erlang-receive%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6.html">erlang Receive的工作机制</a>
            </h1>
        </header>
        <div class="entry-content">
            <p>receive works as follows:</p>

<ol>
  <li>
    <p>When we enter a receive statement, we start a timer (but only if an after section is present in the expression).</p>
  </li>
  <li>
    <p>Take the first message in the mailbox and try to match it against Pattern1, Pattern2, and so on. If the match succeeds, the message is removed from the mailbox, and the expressions following the pattern are evaluated.</p>
  </li>
  <li>
    <p>If none of the patterns in the receive statement matches the first message in the mailbox, then the first message is removed from the mailbox and put into a “save queue.” The second message in the mailbox is then tried. This procedure is repeated until a matching message is found or until all the messages in the mailbox have been examined.</p>
  </li>
  <li>
    <p>If none of the messages in the mailbox matches, then the process is suspended and will be rescheduled for execution the next time a new message is put in the mailbox. Note that when a new message arrives, the messages in the save queue are not rematched; only the new message is matched.</p>
  </li>
  <li>
    <p>As soon as a message has been matched, then all messages that have been put into the save queue are reentered into the mailbox in the order in which they arrived at the process. If a timer was set, it is cleared.</p>
  </li>
  <li>
    <p>If the timer elapses when we are waiting for a message, then evaluate the expressions ExpressionsTimeout and put any saved messages back into the mailbox in the order in which they arrived at the process.</p>
  </li>
</ol>


        </div>
        <footer class="entry-footer" role="contentinfo">
                Tags:
                <span class="meta-elements hastags">
                    
                        <a href="/tags/erlang/">erlang</a>
                    
                </span>
        </footer>
    </article>
    
</div>


      <footer id="footer">
    <span class="copyright">
        <p>Copyright &copy; 2015 - 2016 <a href="http://www.rangechow.com">rangechow.com</a>. All Rights Reserved</p>
        <p>Generated by <a href="http://Jekyllrb.com/">Jekyll</a>. Modify from <a href="http://sanographix.github.io/tumblr/zen/">Zen</a> theme, designed by <a href="http://www.sanographix.net/">SANOGRAPHIX.NET</a></p>
    </span>
</footer>

    </div>
  </body>

</html>
